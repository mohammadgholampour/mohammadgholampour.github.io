<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>هوش مصنوعی در بازی سازی - ارائه جامع و بصری نهایی</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-light: #f5f5f4; /* stone-100 */
            --text-light: #292524; /* stone-800 */
            --card-bg-light: white;
            --section-title-text-light: #134E4A; /* teal-800 */
            --section-title-border-light: #0D9488; /* teal-600 */
            --nav-link-text-light: white; /* Header is dark */
            --nav-link-hover-bg-light: #0D9488; /* teal-600 */
            --nav-link-active-bg-light: #134E4A; /* teal-800 */
            --roadmap-step-bg-light: white;
            --roadmap-step-text-light: #134E4A; /* teal-800 */
            --roadmap-step-hover-bg-light: #CCFBF1; /* teal-100 */
            --roadmap-step-active-bg-light: #0D9488; /* teal-600 */
            --roadmap-step-active-text-light: white;
            --roadmap-step-active-border-light: #134E4A; /* teal-800 */
            --roadmap-connector-light: #5EEAD4; /* teal-300 */
            --concept-box-bg-light: #F0FDFA; /* teal-50 */
            --concept-box-border-light: #99F6E4; /* teal-200 */
            --concept-box-text-light: #292524; /* stone-800 */
            --concept-box-h4-light: #0F766E; /* teal-700 */
            --api-feature-box-bg-light: #ECFEFF; /* cyan-50 */
            --api-feature-box-border-light: #0D9488; /* teal-600 */
            --api-feature-box-text-light: #292524; /* stone-800 */
            --api-feature-box-h4-light: #0E7490; /* cyan-700 */
            --api-input-bg-light: white;
            --api-input-border-light: #A3A3A3; /* stone-400 */
            --api-input-text-light: #292524; /* stone-800 */
            --api-input-placeholder-light: #78716c; /* stone-500 */
            --api-input-focus-border-light: #0D9488; /* teal-600 */
            --api-output-bg-light: white;
            --api-output-border-light: #E5E7EB; /* gray-200 */
            --api-output-text-light: #292524; /* stone-800 */
            --tab-button-text-light: #6b7280; /* gray-500 */
            --tab-button-hover-text-light: #14B8A6; /* teal-500 */
            --tab-button-hover-border-light: #5EEAD4; /* teal-300 */
            --tab-button-active-text-light: #0D9488; /* teal-600 */
            --tab-button-active-border-light: #0D9488; /* teal-600 */
            --interactive-list-item-border-light: #D1D5DB; /* gray-300 */
            --interactive-list-item-hover-bg-light: #E0F2F1; /* teal-50 variant */
            --interactive-list-item-hover-border-light: #0D9488; /* teal-600 */
            --interactive-list-item-content-bg-light: #F9FAFB; /* gray-50 */
            --interactive-list-item-content-border-light: #0D9488; /* teal-600 */
            --chart-grid-light: #e7e5e4; /* stone-200 */
            --chart-ticks-light: #44403c; /* stone-700 */
            --footer-bg-light: #292524; /* stone-800 */
            --footer-text-light: #d6d3d1; /* stone-300 */


            --bg-dark: #1c1917; /* stone-900 */
            --text-dark: #d6d3d1; /* stone-300 */
            --card-bg-dark: #292524; /* stone-800 */
            --section-title-text-dark: #2dd4bf; /* teal-400 */
            --section-title-border-dark: #14b8a6; /* teal-500 */
            --nav-link-text-dark: #d6d3d1; /* For dark header if it were to change, but header is teal */
            --nav-link-hover-bg-dark: #115e59; /* teal-700 */
            --nav-link-active-bg-dark: #0d9488; /* teal-600 */
            --roadmap-step-bg-dark: #404040; /* neutral-700 */
            --roadmap-step-text-dark: #5eead4; /* teal-300 */
            --roadmap-step-hover-bg-dark: #525252; /* neutral-600 */
            --roadmap-step-active-bg-dark: #14b8a6; /* teal-500 */
            --roadmap-step-active-text-dark: #1c1917; /* stone-900 */
            --roadmap-step-active-border-dark: #2dd4bf; /* teal-400 */
            --roadmap-connector-dark: #0f766e; /* teal-700 */
            --concept-box-bg-dark: #292524; /* stone-800 */
            --concept-box-border-dark: #44403c; /* stone-700 */
            --concept-box-text-dark: #d6d3d1; /* stone-300 */
            --concept-box-h4-dark: #5eead4; /* teal-400 */
            --api-feature-box-bg-dark: #262626; /* neutral-800 */
            --api-feature-box-border-dark: #0d9488; /* teal-600 */
            --api-feature-box-text-dark: #d4d4d4; /* neutral-300 */
            --api-feature-box-h4-dark: #2dd4bf; /* teal-400 */
            --api-input-bg-dark: #404040; /* neutral-700 */
            --api-input-border-dark: #525252; /* neutral-600 */
            --api-input-text-dark: #e5e5e5; /* neutral-200 */
            --api-input-placeholder-dark: #a3a3a3; /* neutral-500 */
            --api-input-focus-border-dark: #14b8a6; /* teal-500 */
            --api-output-bg-dark: #404040; /* neutral-700 */
            --api-output-border-dark: #525252; /* neutral-600 */
            --api-output-text-dark: #d4d4d4; /* neutral-300 */
            --tab-button-text-dark: #a3a3a3; /* neutral-400 */
            --tab-button-hover-text-dark: #5eead4; /* teal-300 */
            --tab-button-hover-border-dark: #14b8a6; /* teal-500 */
            --tab-button-active-text-dark: #2dd4bf; /* teal-400 */
            --tab-button-active-border-dark: #2dd4bf; /* teal-400 */
            --interactive-list-item-border-dark: #525252; /* neutral-600 */
            --interactive-list-item-hover-bg-dark: #404040; /* neutral-700 */
            --interactive-list-item-hover-border-dark: #14b8a6; /* teal-500 */
            --interactive-list-item-content-bg-dark: #262626; /* neutral-800 */
            --interactive-list-item-content-border-dark: #14b8a6; /* teal-500 */
            --chart-grid-dark: #44403c; /* stone-700 */
            --chart-ticks-dark: #d6d3d1; /* stone-300 */
            --footer-bg-dark: #171717; /* neutral-900 */
            --footer-text-dark: #a3a3a3; /* neutral-400 */
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            scroll-behavior: smooth;
            background-color: var(--bg-light);
            color: var(--text-light);
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .dark body {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }
        .chart-container {
            position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 350px; 
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        
        .tab-content { display: none; opacity: 0; transition: opacity 0.5s ease-in-out; }
        .tab-content.active { display: block; opacity: 1; }
        
        header { background-color: #0F766E; /* teal-700 base, dark mode won't change header bg */ }
        .nav-link {
            padding: 0.5rem 0.75rem; border-radius: 0.375rem; 
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease; font-size: 0.875rem; 
            color: var(--nav-link-text-light);
        }
        .nav-link:hover { 
            background-color: var(--nav-link-hover-bg-light); color: white; transform: translateY(-2px); 
        }
        .nav-link.active { 
            background-color: var(--nav-link-active-bg-light); color: white; font-weight: 500; 
        }
        .dark .nav-link:hover { background-color: var(--nav-link-hover-bg-dark); }
        .dark .nav-link.active { background-color: var(--nav-link-active-bg-dark); }

        .section-title {
            font-size: 2rem;
            font-weight: 700; margin-bottom: 1.5rem; padding-bottom: 0.75rem; 
            text-align: center; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            color: var(--section-title-text-light);
            border-bottom: 3px solid var(--section-title-border-light);
        }
        @media (min-width: 768px) { .section-title { font-size: 2.25rem; } }
        .dark .section-title {
            color: var(--section-title-text-dark);
            border-bottom-color: var(--section-title-border-dark);
        }
        .card {
            background-color: var(--card-bg-light);
            border-radius: 0.75rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); 
            padding: 1.5rem; margin-bottom: 1.5rem; opacity: 0; transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out, background-color 0.3s ease, border-color 0.3s ease;
        }
        .dark .card {
            background-color: var(--card-bg-dark);
            border: 1px solid var(--concept-box-border-dark); /* Adding subtle border for dark cards */
        }
        .card.is-visible { opacity: 1; transform: translateY(0); }
        @media (min-width: 768px) { .card { padding: 2rem; } }

        .interactive-list-item {
            cursor: pointer; padding: 1rem; border-radius: 0.5rem; margin-bottom: 0.75rem; 
            transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
            border: 1px solid var(--interactive-list-item-border-light);
        }
        .interactive-list-item:hover { 
            transform: translateX(-3px); 
            background-color: var(--interactive-list-item-hover-bg-light);
            border-color: var(--interactive-list-item-hover-border-light);
        }
        .dark .interactive-list-item { border-color: var(--interactive-list-item-border-dark); }
        .dark .interactive-list-item:hover {
            background-color: var(--interactive-list-item-hover-bg-dark);
            border-color: var(--interactive-list-item-hover-border-dark);
        }
        .interactive-list-item-content {
            display: none; margin-top: 0.75rem; padding: 1rem; border-radius: 0.5rem; 
            animation: fadeInContent 0.5s ease-in-out;
            background-color: var(--interactive-list-item-content-bg-light);
            border-left: 4px solid var(--interactive-list-item-content-border-light);
        }
        .dark .interactive-list-item-content {
            background-color: var(--interactive-list-item-content-bg-dark);
            border-left-color: var(--interactive-list-item-content-border-dark);
        }
        @keyframes fadeInContent { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .roadmap { display: flex; flex-direction: column; align-items: center; padding: 2rem 0; }
        .roadmap-step {
            padding: 1rem 1.5rem; margin: 0.5rem 0; border-radius: 0.5rem; box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
            width: 80%; max-width: 500px; text-align: center; cursor: pointer;
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease, color 0.3s ease, border-color 0.3s ease;
            border: 2px solid transparent; display: flex; align-items: center; justify-content: center;
            background-color: var(--roadmap-step-bg-light);
            color: var(--roadmap-step-text-light);
        }
        .roadmap-step-icon { margin-left: 0.75rem; font-size: 1.25rem; }
        .roadmap-step:hover { 
            transform: scale(1.05) translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.15); 
            background-color: var(--roadmap-step-hover-bg-light);
        }
        .roadmap-step.active { 
            font-weight: 700; transform: scale(1.02); 
            background-color: var(--roadmap-step-active-bg-light);
            color: var(--roadmap-step-active-text-light);
            border-color: var(--roadmap-step-active-border-light);
        }
        .dark .roadmap-step {
            background-color: var(--roadmap-step-bg-dark);
            color: var(--roadmap-step-text-dark);
        }
        .dark .roadmap-step:hover { background-color: var(--roadmap-step-hover-bg-dark); }
        .dark .roadmap-step.active {
            background-color: var(--roadmap-step-active-bg-dark);
            color: var(--roadmap-step-active-text-dark);
            border-color: var(--roadmap-step-active-border-dark);
        }
        .roadmap-connector { 
            width: 3px; height: 35px; margin: -2px auto; position: relative; z-index: -1; 
            background-color: var(--roadmap-connector-light);
        }
        .dark .roadmap-connector { background-color: var(--roadmap-connector-dark); }
        
        .concept-box {
            padding: 1.25rem; border-radius: 0.75rem; margin-top: 1rem; box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            background-color: var(--concept-box-bg-light);
            border: 1px solid var(--concept-box-border-light);
            color: var(--concept-box-text-light);
        }
        .concept-box h4 { font-weight: 500; margin-bottom: 0.75rem; color: var(--concept-box-h4-light); }
        .dark .concept-box {
            background-color: var(--concept-box-bg-dark);
            border-color: var(--concept-box-border-dark);
            color: var(--concept-box-text-dark);
        }
        .dark .concept-box h4 { color: var(--concept-box-h4-dark); }

        .api-feature-box { 
            padding: 1.5rem; margin-top: 1.5rem; border-radius: 0.75rem; 
            border: 2px dashed var(--api-feature-box-border-light);
            background-color: var(--api-feature-box-bg-light);
            color: var(--api-feature-box-text-light);
        }
        .api-feature-box h4 { font-weight: 700; margin-bottom: 1rem; color: var(--api-feature-box-h4-light); }
        .dark .api-feature-box {
            border-color: var(--api-feature-box-border-dark);
            background-color: var(--api-feature-box-bg-dark);
            color: var(--api-feature-box-text-dark);
        }
        .dark .api-feature-box h4 { color: var(--api-feature-box-h4-dark); }
        
        .api-input { 
            width: 100%; padding: 0.6rem 0.85rem; border-radius: 0.375rem; margin-bottom: 0.75rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: var(--api-input-bg-light);
            border: 1px solid var(--api-input-border-light);
            color: var(--api-input-text-light);
        }
        .api-input::placeholder { color: var(--api-input-placeholder-light); }
        .api-input:focus { 
            outline: none; 
            border-color: var(--api-input-focus-border-light);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.2); /* Light mode focus ring */
        }
        .dark .api-input {
            background-color: var(--api-input-bg-dark);
            border-color: var(--api-input-border-dark);
            color: var(--api-input-text-dark);
        }
        .dark .api-input::placeholder { color: var(--api-input-placeholder-dark); }
        .dark .api-input:focus {
            border-color: var(--api-input-focus-border-dark);
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.3); /* Dark mode focus ring */
        }
        
        .api-button { 
            padding: 0.6rem 1.2rem; border-radius: 0.375rem; font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease;
            background-color: #14B8A6; /* teal-500 */ color: white;
        }
        .api-button:hover { transform: translateY(-1px); background-color: #0D9488; /* teal-600 */ }
        .dark .api-button { background-color: #0d9488; /* teal-600 */ }
        .dark .api-button:hover { background-color: #14b8a6; /* teal-500 */ }

        .api-output { 
            margin-top: 1rem; padding: 1rem; border-radius: 0.375rem; min-height: 60px; 
            white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6; box-shadow: inset 0 1px 2px rgba(0,0,0,0.05);
            background-color: var(--api-output-bg-light);
            border: 1px solid var(--api-output-border-light);
            color: var(--api-output-text-light);
        }
        .dark .api-output {
            background-color: var(--api-output-bg-dark);
            border-color: var(--api-output-border-dark);
            color: var(--api-output-text-dark);
        }
        
        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            backdrop-filter: blur(4px); z-index: 1000; display: none; 
            justify-content: center; align-items: center;
            background-color: rgba(255, 255, 255, 0.8);
        }
        .dark #loading-overlay { background-color: rgba(0, 0, 0, 0.7); }
        
        #loading-spinner {
            border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite;
            border: 8px solid #e0f2f1; /* lighter teal */
            border-top: 8px solid #134E4A; /* darker teal */
        }
        .dark #loading-spinner {
            border: 8px solid #404040; /* neutral-700 */
            border-top: 8px solid #14b8a6; /* teal-500 */
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .cover-page-card {
            padding: 3rem 1.5rem; border-radius: 0.75rem; text-align: center; 
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.3), 0 10px 10px -5px rgba(0,0,0,0.2);
            background: linear-gradient(135deg, #0F766E 0%, #14B8A6 100%); color: white;
        }
        @media (min-width: 768px) { .cover-page-card { padding: 3rem 2rem; } }
        .dark .cover-page-card { background: linear-gradient(135deg, #134e4a 0%, #0f766e 100%); }
        
        .cover-page-card h1 {
            font-size: 2.25rem; font-weight: 700; margin-bottom: 1.5rem; text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        @media (min-width: 768px) { .cover-page-card h1 { font-size: 2.75rem; } }
        .cover-page-card p { font-size: 1.125rem; margin-bottom: 0.75rem; line-height: 1.75; }
        .cover-page-card .university-name { font-size: 1.5rem; font-weight: 300; margin-bottom: 1.5rem; }
        .cover-page-card .lecturer-info { margin-top: 2rem; font-size: 1rem; }
        .cover-page-card .semester-info { margin-top: 2.5rem; font-size: 1.25rem; font-weight: 500; }
        
        .tab-button-container { border-bottom: 1px solid var(--interactive-list-item-border-light); }
        .dark .tab-button-container { border-bottom-color: var(--interactive-list-item-border-dark); }
        .tab-button {
            padding: 0.75rem 1rem; font-size: 0.9rem; transition: color 0.3s, border-color 0.3s;
            border-bottom-width: 3px; border-bottom-color: transparent; cursor: pointer;
            color: var(--tab-button-text-light);
        }
        @media (min-width: 768px) { .tab-button { padding: 0.75rem 1.5rem; font-size: 1rem; } }
        .tab-button:hover {
            color: var(--tab-button-hover-text-light);
            border-bottom-color: var(--tab-button-hover-border-light);
        }
        .tab-button.active {
            color: var(--tab-button-active-text-light);
            border-bottom-color: var(--tab-button-active-border-light);
            font-weight: 700;
        }
        .dark .tab-button { color: var(--tab-button-text-dark); }
        .dark .tab-button:hover {
            color: var(--tab-button-hover-text-dark);
            border-bottom-color: var(--tab-button-hover-border-dark);
        }
        .dark .tab-button.active {
            color: var(--tab-button-active-text-dark);
            border-bottom-color: var(--tab-button-active-border-dark);
        }

        .tab-content-area { background-color: var(--interactive-list-item-content-bg-light); }
        .dark .tab-content-area { background-color: var(--interactive-list-item-content-bg-dark); }

        #theme-toggle-button {
            background: none; border: none; cursor: pointer; padding: 0.5rem; border-radius: 50%;
            transition: background-color 0.2s;
        }
        #theme-toggle-button:hover { background-color: rgba(255,255,255,0.1); }
        .dark #theme-toggle-button:hover { background-color: rgba(0,0,0,0.1); }
        
        footer {
            background-color: var(--footer-bg-light);
            color: var(--footer-text-light);
        }
        .dark footer {
            background-color: var(--footer-bg-dark);
            color: var(--footer-text-dark);
        }

        .bg-gray-50 { background-color: #F9FAFB; } .dark .bg-gray-50 { background-color: var(--interactive-list-item-content-bg-dark); }
        .text-gray-500 { color: #6b7280; } .dark .text-gray-500 { color: var(--tab-button-text-dark); }
        .text-gray-600 { color: #4b5563; } .dark .text-gray-600 { color: #a3a3a3; /* neutral-400 */ }
        .bg-teal-50 { background-color: #F0FDFA; } .dark .bg-teal-50 { background-color: var(--concept-box-bg-dark); }
        .border-teal-500 { border-color: #14B8A6; } .dark .border-teal-500 { border-color: var(--concept-box-border-dark); }
        .text-teal-700 { color: #0F766E; } .dark .text-teal-700 { color: var(--concept-box-h4-dark); }
        .bg-sky-200 { background-color: #bae6fd; } .dark .bg-sky-200 { background-color: #0c4a6e; } 
        .bg-rose-200 { background-color: #fecdd3; } .dark .bg-rose-200 { background-color: #831843; }
        .bg-lime-200 { background-color: #d9f99d; } .dark .bg-lime-200 { background-color: #3f6212; } 
        .bg-amber-200 { background-color: #fde68a; } .dark .bg-amber-200 { background-color: #78350f; }
        .text-red-600 {color: #dc2626;} .dark .text-red-600 { color: #f87171; } 
        .text-green-600 {color: #16a34a;} .dark .text-green-600 { color: #4ade80; } 

    </style>
</head>
<body>

    <div id="loading-overlay">
        <div id="loading-spinner"></div>
    </div>

    <header class="text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex flex-wrap justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold">هوش مصنوعی در بازی سازی</h1>
            <div class="flex items-center">
                <!-- Mobile menu button -->
                <button id="mobile-menu-button" class="lg:hidden p-2 rounded-md text-gray-200 hover:text-white hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                    <span class="sr-only">باز کردن منوی اصلی</span>
                    <svg id="mobile-menu-open-icon" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                    <svg id="mobile-menu-close-icon" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
                
                <!-- Desktop Navigation -->
                <nav id="main-nav" class="hidden lg:flex ml-4">
                    <ul class="flex flex-wrap space-x-reverse space-x-1 md:space-x-2">
                        <li><a href="#cover-page" class="nav-link">صفحه اول</a></li>
                        <li><a href="#intro" class="nav-link">مقدمه</a></li>
                        <li><a href="#roadmap-section" class="nav-link">نقشه راه</a></li>
                        <li><a href="#ml" class="nav-link">یادگیری ماشین</a></li>
                        <li><a href="#adaptability" class="nav-link">تطبیق‌پذیری</a></li>
                        <li><a href="#social-sim" class="nav-link">شبیه‌سازی اجتماعی</a></li>
                        <li><a href="#ethics" class="nav-link">اخلاقیات</a></li>
                        <li><a href="#future" class="nav-link">آینده</a></li>
                        <li><a href="#conclusion" class="nav-link">نتیجه‌گیری</a></li>
                        <li><a href="#references" class="nav-link">منابع</a></li>
                    </ul>
                </nav>
                <button id="theme-toggle-button" title="تغییر پوسته" class="ml-2">
                    <svg id="theme-toggle-dark-icon" class="hidden h-6 w-6 text-yellow-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                    <svg id="theme-toggle-light-icon" class="hidden h-6 w-6 text-gray-100" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile menu, show/hide based on menu state. -->
        <div class="lg:hidden hidden" id="mobile-menu">
            <ul class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <li><a href="#cover-page" class="nav-link block">صفحه اول</a></li>
                <li><a href="#intro" class="nav-link block">مقدمه</a></li>
                <li><a href="#roadmap-section" class="nav-link block">نقشه راه</a></li>
                <li><a href="#ml" class="nav-link block">یادگیری ماشین</a></li>
                <li><a href="#adaptability" class="nav-link block">تطبیق‌پذیری</a></li>
                <li><a href="#social-sim" class="nav-link block">شبیه‌سازی اجتماعی</a></li>
                <li><a href="#ethics" class="nav-link block">اخلاقیات</a></li>
                <li><a href="#future" class="nav-link block">آینده</a></li>
                <li><a href="#conclusion" class="nav-link block">نتیجه‌گیری</a></li>
                <li><a href="#references" class="nav-link block">منابع</a></li>
            </ul>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-6">
        <section id="cover-page" class="py-10 md:py-16 card">
            <div class="cover-page-card max-w-3xl mx-auto">
                <p class="university-name">دانشگاه خاوران</p>
                <h1>موضوع ارائه: هوش مصنوعی در بازی سازی</h1>
                <p class="text-xl font-medium">یادگیری ماشین و تطبیق پذیری و شبیه سازی تعاملات اجتماعی و گروهی بازی سازی</p>
                
                <div class="lecturer-info mt-10">
                    <p><strong>ارائه دهنده:</strong> محمد غلامپور</p>
                    <p><strong>نام درس:</strong> طراحی بازی های کامپیوتری</p>
                    <p><strong>نام استاد:</strong> خانم دکتر کباری</p>
                </div>
                <p class="semester-info mt-12">بهار 1404</p>
            </div>
        </section>

        <section id="intro" class="py-8 md:py-10 card">
            <h2 class="section-title">مقدمه: نقش هوش مصنوعی در تحول بازی‌های کامپیوتری</h2>
            <div>
                <p class="mb-4 text-lg">هوش مصنوعی (AI) به سرعت در حال تغییر چهره صنعت بازی‌سازی است. از ایجاد شخصیت‌های غیرقابل بازی (NPC) هوشمندتر و پویاتر گرفته تا تولید مراحل و داستان‌های جدید به صورت رویه‌ای، هوش مصنوعی امکانات بی‌نظیری را برای توسعه‌دهندگان و تجربه‌ای غنی‌تر را برای بازیکنان فراهم می‌کند. این ارائه به بررسی عمیق جنبه‌های کلیدی هوش مصنوعی در بازی‌سازی، با تمرکز ویژه بر <strong>یادگیری ماشین</strong>، <strong>تطبیق‌پذیری سیستم‌های هوشمند</strong> و <strong>شبیه‌سازی تعاملات اجتماعی و گروهی</strong> می‌پردازد. همچنین، قابلیت‌های جدیدی با استفاده از API های هوش مصنوعی برای نمایش عملی قدرت هوش مصنوعی مولد اضافه شده است.</p>
                <p class="text-md">در ادامه، ابتدا نقشه راه این ارائه را مرور کرده و سپس به تفصیل به هر یک از موضوعات اصلی خواهیم پرداخت، نمونه‌های کاربردی را بررسی کرده و نگاهی به چالش‌ها و آینده پیش روی هوش مصنوعی در این عرصه خواهیم داشت.</p>
            </div>
        </section>

        <section id="roadmap-section" class="py-8 md:py-10 card">
            <h2 class="section-title">نقشه راه ارائه</h2>
            <div>
                <p class="text-center mb-6 text-md">برای مشاهده جزئیات هر بخش، روی آن کلیک کنید یا صفحه را به پایین اسکرول نمایید.</p>
                <div class="roadmap" id="interactive-roadmap">
                    </div>
            </div>
        </section>

        <section id="ml" class="py-8 md:py-10 card">
            <h2 class="section-title">یادگیری ماشین: مغز متفکر بازی‌های هوشمند</h2>
            <div>
                <p class="mb-4">یادگیری ماشین (Machine Learning - ML)، زیرشاخه‌ای از هوش مصنوعی است که به سیستم‌ها امکان می‌دهد بدون برنامه‌ریزی صریح، از داده‌ها یاد بگیرند و عملکرد خود را بهبود بخشند. در بازی‌سازی، این فناوری کاربردهای وسیعی دارد، از جمله ایجاد NPCهایی که رفتار خود را با بازیکن تطبیق می‌دهند، تولید محتوای رویه‌ای (Procedural Content Generation - PCG) برای مراحل و آیتم‌های بازی، و تحلیل رفتار بازیکن برای شخصی‌سازی تجربه و بهبود طراحی بازی.</p>
                
                <div class="mb-6">
                    <div class="flex tab-button-container justify-center flex-wrap">
                        <button class="tab-button" onclick="openTab(event, 'supervised')">یادگیری نظارت‌شده</button>
                        <button class="tab-button" onclick="openTab(event, 'unsupervised')">یادگیری بدون نظارت</button>
                        <button class="tab-button" onclick="openTab(event, 'reinforcement')">یادگیری تقویتی</button>
                    </div>

                    <div id="supervised" class="tab-content p-4 tab-content-area rounded-b-md mt-0">
                        <h3 class="text-xl font-semibold mb-3">یادگیری نظارت‌شده (Supervised Learning)</h3>
                        <p>در این روش، الگوریتم با استفاده از داده‌های برچسب‌گذاری شده آموزش می‌بیند. به عنوان مثال، می‌توان از آن برای تشخیص الگوهای رفتاری بازیکن (مانند تشخیص بازیکن متقلب با استفاده از الگوریتم‌هایی چون SVM یا شبکه‌های عصبی)، یا برای دسته‌بندی انواع مختلف حرکات بازیکن استفاده کرد.</p>
                        <p class="mt-2"><strong>کاربرد در بازی:</strong> آموزش NPCها برای انجام وظایف خاص (مانند مسیریابی یا تصمیم‌گیری‌های تاکتیکی پایه)، تشخیص سبک بازی بازیکن برای ارائه چالش‌های متناسب، پیش‌بینی خروج بازیکن (churn prediction).</p>
                    </div>
                    <div id="unsupervised" class="tab-content p-4 tab-content-area rounded-b-md mt-0">
                        <h3 class="text-xl font-semibold mb-3">یادگیری بدون نظارت (Unsupervised Learning)</h3>
                        <p>این نوع یادگیری با داده‌های بدون برچسب کار می‌کند و سعی در کشف الگوها و ساختارهای پنهان در داده‌ها دارد (مانند الگوریتم‌های خوشه‌بندی k-means یا DBSCAN). مثلاً برای گروه‌بندی بازیکنان با سبک‌های بازی مشابه یا برای تولید محتوای جدید (مانند طراحی مراحل یا آیتم‌ها) بر اساس الگوهای موجود کاربرد دارد.</p>
                        <p class="mt-2"><strong>کاربرد در بازی:</strong> کشف گروه‌های بازیکنان با علایق مشابه برای ارائه پیشنهادات شخصی‌سازی شده، کمک به تولید رویه‌ای نقشه‌ها و محیط‌های بازی با تنوع بیشتر، شناسایی ناهنجاری‌ها در داده‌های بازی.</p>
                    </div>
                    <div id="reinforcement" class="tab-content p-4 tab-content-area rounded-b-md mt-0">
                        <h3 class="text-xl font-semibold mb-3">یادگیری تقویتی (Reinforcement Learning - RL)</h3>
                        <p>در یادگیری تقویتی، عامل (Agent) از طریق آزمون و خطا و دریافت پاداش یا جریمه برای اعمالش، یاد می‌گیرد که چگونه در یک محیط به بهترین شکل عمل کند (مانند Q-Learning یا Deep Q-Networks - DQN). این روش برای آموزش NPCها به منظور انجام رفتارهای پیچیده و استراتژیک بسیار مؤثر است.</p>
                        <p class="mt-2"><strong>کاربرد در بازی:</strong> ایجاد NPCهای رقیب که می‌توانند استراتژی‌های بازیکن را یاد بگیرند و به آنها پاسخ دهند (مانند AlphaStar در StarCraft II)، آموزش ربات‌ها برای بازی کردن و تست خودکار بازی، بهینه‌سازی سیستم‌های پاداش‌دهی در بازی.</p>
                         <div class="concept-box mt-4">
                            <h4>انیمیشن مفهومی یادگیری تقویتی:</h4>
                            <p class="text-sm">تصور کنید یک عامل (مثلاً یک NPC) در یک هزارتو قرار دارد. با هر حرکت، اگر به هدف نزدیک‌تر شود پاداش می‌گیرد و اگر به دیوار برخورد کند جریمه می‌شود. پس از هزاران بار تکرار، عامل یاد می‌گیرد که بهترین مسیر را برای رسیدن به هدف پیدا کند.</p>
                        </div>
                    </div>
                </div>
                <p class="mb-4"><strong>هوش مصنوعی در تست بازی (AI in Game Testing):</strong> ML می‌تواند برای خودکارسازی فرآیندهای تست بازی، شناسایی باگ‌ها، و ارزیابی تعادل بازی (game balance) استفاده شود. عامل‌های هوشمند می‌توانند بازی را به شیوه‌های مختلف انجام دهند و مشکلات را سریع‌تر از تسترهای انسانی کشف کنند.</p>
                <div class="chart-container mt-6">
                    <canvas id="mlApplicationsChart"></canvas>
                </div>
                <p class="text-sm text-center mt-2">نمودار مفهومی: کاربردهای یادگیری ماشین در بازی‌ها (داده‌ها نمایشی هستند)</p>
            </div>
        </section>

        <section id="adaptability" class="py-8 md:py-10 card">
            <h2 class="section-title">تطبیق‌پذیری: هوش مصنوعی که با شما رشد می‌کند</h2>
            <div>
                <p class="mb-4">تطبیق‌پذیری در هوش مصنوعی بازی به معنای توانایی سیستم برای تغییر رفتار و خصوصیات خود بر اساس عملکرد، سبک بازی و حتی احساسات بازیکن است. این امر منجر به تجربه‌ای پویاتر و شخصی‌تر می‌شود.</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-3">تنظیم پویای سختی (Dynamic Difficulty Adjustment - DDA)</h3>
                        <p class="mb-2">DDA سطح چالش بازی را متناسب با مهارت بازیکن تنظیم می‌کند تا از خستگی یا ناامیدی او جلوگیری شود. اگر بازیکن به راحتی پیشرفت کند، بازی سخت‌تر می‌شود و بالعکس.</p>
                        <div class="concept-box">
                            <h4>مثال مفهومی DDA:</h4>
                            <p class="text-sm">فرض کنید یک بازی مسابقه‌ای دارید. اگر بازیکن چندین مسابقه را پشت سر هم ببرد، هوش مصنوعی رقیبان سریع‌تر و ماهرتر می‌شود. اگر بازیکن چند بار ببازد، سرعت رقیبان کمی کاهش می‌یابد یا موانع کمتری در مسیر قرار می‌گیرد.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-3">مدل‌سازی بازیکن (Player Modeling)</h3>
                        <p class="mb-2">هوش مصنوعی با تحلیل رفتار، تصمیمات و الگوهای بازی بازیکن، یک "مدل" یا پروفایل از او ایجاد می‌کند. این مدل شامل ترجیحات، سطح مهارت، سبک بازی (تهاجمی، تدافعی، کاوشگر) و حتی احساسات احتمالی بازیکن است.</p>
                         <div class="concept-box">
                            <h4>کاربرد مدل بازیکن:</h4>
                            <ul class="list-disc list-inside text-sm space-y-1">
                                <li>شخصی‌سازی داستان و ماموریت‌ها.</li>
                                <li>ارائه پاداش‌ها و آیتم‌های مورد علاقه بازیکن.</li>
                                <li>تطبیق رفتار NPCها با سبک بازی بازیکن.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="p-6 rounded-lg my-6 bg-teal-50 border-l-4 border-teal-500">
                    <h4 class="font-semibold text-lg">مثال برجسته: سیستم Nemesis (بازی Middle-earth: Shadow of Mordor)</h4>
                    <p class="text-sm mt-2">این سیستم نمونه‌ای درخشان از تطبیق‌پذیری و مدل‌سازی دشمنان است. اورک‌ها (دشمنان) بر اساس تعاملاتشان با بازیکن، رشد می‌کنند، رتبه می‌گیرند، نقاط قوت و ضعف جدیدی کسب می‌کنند و حتی شکست‌های قبلی خود از بازیکن را به یاد می‌آورند. این باعث ایجاد داستان‌های شخصی و دشمنان به یاد ماندنی برای هر بازیکن می‌شود.</p>
                </div>
                <h3 class="text-xl font-semibold mb-3 mt-6">هوش مصنوعی برای دسترسی‌پذیری (AI for Accessibility)</h3>
                <p>هوش مصنوعی می‌تواند به طور قابل توجهی به افزایش دسترسی‌پذیری بازی‌ها برای افراد با نیازهای ویژه کمک کند. به عنوان مثال:</p>
                <ul class="list-disc list-inside space-y-1 ml-4">
                    <li>تنظیم خودکار اندازه فونت و کنتراست تصویر.</li>
                    <li>ارائه سیستم‌های کنترل تطبیقی (مثلاً کنترل صوتی یا ردیابی نگاه).</li>
                    <li>تولید خودکار زیرنویس‌های دقیق و توصیفات صوتی.</li>
                    <li>تطبیق گیم‌پلی برای بازیکنانی که محدودیت‌های حرکتی یا شناختی دارند.</li>
                </ul>
            </div>
        </section>

        <section id="social-sim" class="py-8 md:py-10 card">
            <h2 class="section-title">شبیه‌سازی تعاملات اجتماعی و گروهی: NPCهایی که زندگی می‌کنند</h2>
            <div>
                <p class="mb-4">یکی از چالش‌های بزرگ و در عین حال جذاب‌ترین حوزه‌ها در بازی‌سازی، ایجاد شخصیت‌های غیرقابل بازی (NPC) است که نه تنها هوشمند به نظر برسند، بلکه تعاملات اجتماعی باورپذیر و معناداری با بازیکن و با یکدیگر داشته باشند. هوش مصنوعی نقش کلیدی در مدل‌سازی احساسات، روابط، اهداف شخصی و دینامیک‌های گروهی NPCها ایفا می‌کند.</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="concept-box">
                        <h4 class="text-lg">تکنیک‌های رایج:</h4>
                        <ul class="list-disc list-inside text-sm space-y-1">
                            <li><strong>درخت‌های رفتار (Behavior Trees):</strong> روشی گرافیکی برای تعریف رفتارهای پیچیده NPCها به صورت ماژولار.</li>
                            <li><strong>برنامه‌ریزی عمل مبتنی بر هدف (Goal-Oriented Action Planning - GOAP):</strong> NPCها اهدافی دارند و هوش مصنوعی بهترین توالی از اعمال را برای رسیدن به آن اهداف پیدا می‌کند.</li>
                            <li><strong>سیستم‌های مبتنی بر عامل (Agent-based Systems):</strong> هر NPC به عنوان یک عامل مستقل با دانش، باورها و اهداف خود عمل می‌کند.</li>
                            <li><strong>مدل‌های احساسی (Emotional Models):</strong> شبیه‌سازی احساسات NPCها و تاثیر آن بر تصمیم‌گیری و رفتارشان.</li>
                        </ul>
                    </div>
                    <div class="concept-box">
                        <h4 class="text-lg">رفتار نوظهور (Emergent Behavior)</h4>
                        <p class="text-sm">یکی از اهداف اصلی در شبیه‌سازی اجتماعی، دستیابی به رفتار نوظهور است. این یعنی رفتارهای پیچیده و غیرمنتظره‌ای که از تعامل ساده چندین عامل (NPC) با یکدیگر و با محیط به وجود می‌آیند، بدون اینکه به طور صریح برنامه‌ریزی شده باشند. این امر به پویایی و باورپذیری دنیای بازی می‌افزاید.</p>
                    </div>
                </div>
                 <div class="mt-6 p-6 border rounded-lg bg-gray-50">
                    <h4 class="font-semibold text-xl mb-4 text-center">نمونه مفهومی از شبکه اجتماعی پویای NPCها</h4>
                    <p class="text-sm text-center mb-4">تصور کنید در یک روستا، NPCها بر اساس شغل، خانواده و اتفاقات روزمره با هم تعامل دارند. یک شایعه (مثلاً حمله راهزنان) می‌تواند به سرعت پخش شود، اتحادها یا دشمنی‌هایی شکل بگیرد و رفتار کل جامعه NPCها را تحت تاثیر قرار دهد.</p>
                    <div class="flex flex-wrap justify-around items-center space-y-4 md:space-y-0 h-auto md:h-56">
                        <div class="text-center p-2">
                            <div class="w-20 h-20 bg-sky-200 rounded-full flex items-center justify-center shadow-md text-xs font-medium">NPC کشاورز</div>
                            <p class="text-xs mt-1">نگران محصولات</p>
                        </div>
                        <div class="text-center p-2 relative">
                            <div class="w-20 h-20 bg-rose-200 rounded-full flex items-center justify-center shadow-md text-xs font-medium">NPC آهنگر</div>
                            <p class="text-xs mt-1">نیاز به منابع</p>
                            <span class="absolute top-0 right-0 bg-red-500 text-white text-xs px-1 rounded-full animate-pulse">هشدار!</span>
                        </div>
                         <div class="text-center p-2">
                            <div class="w-20 h-20 bg-lime-200 rounded-full flex items-center justify-center shadow-md text-xs font-medium">NPC تاجر</div>
                            <p class="text-xs mt-1">به دنبال سود</p>
                        </div>
                         <div class="text-center p-2">
                            <div class="w-20 h-20 bg-amber-200 rounded-full flex items-center justify-center shadow-md text-xs font-medium">NPC نگهبان</div>
                            <p class="text-xs mt-1">حفظ امنیت</p>
                        </div>
                    </div>
                    <p class="text-xs text-center mt-4">این روابط و وضعیت‌ها می‌توانند بر اساس اقدامات بازیکن و رویدادهای بازی به طور پویا تغییر کنند.</p>
                </div>

                <div class="api-feature-box">
                    <h4>✨ تولید کننده دیالوگ NPC</h4>
                    <p class="text-sm mb-3">یک سناریوی کوتاه برای NPC خود تعریف کنید (مثلاً: "شخصیت یک جادوگر پیر و فراموشکار است و در مورد گم شدن کتاب طلسم‌هایش صحبت می‌کند") و ببینید هوش مصنوعی چگونه برای او دیالوگ خلق می‌کند!</p>
                    <input type="text" id="npc-scenario-input" class="api-input" placeholder="سناریوی NPC را اینجا وارد کنید...">
                    <button id="generate-npc-dialogue-button" class="api-button">✨ تولید دیالوگ</button>
                    <div id="npc-dialogue-output" class="api-output">دیالوگ تولید شده در اینجا نمایش داده می‌شود...</div>
                </div>

            </div>
        </section>

        <section id="ethics" class="py-8 md:py-10 card">
            <h2 class="section-title">ملاحظات اخلاقی و چالش‌ها</h2>
            <div>
                <p class="mb-4">با پیشرفت هوش مصنوعی در بازی‌سازی، سوالات و چالش‌های اخلاقی جدیدی نیز مطرح می‌شوند. مهم است که توسعه‌دهندگان و جامعه بازی‌سازان به این مسائل توجه کنند تا از پیامدهای منفی احتمالی جلوگیری شود.</p>
                <ul id="ethical-points-list" class="space-y-3">
                    <li class="interactive-list-item" data-target="ethics-bias">سوگیری در الگوریتم‌ها و بازنمایی</li>
                    <div id="ethics-bias" class="interactive-list-item-content">
                        <p>الگوریتم‌های هوش مصنوعی می‌توانند سوگیری‌های موجود در داده‌هایی که با آنها آموزش دیده‌اند را بازتولید کنند. این امر می‌تواند منجر به نمایش کلیشه‌ای شخصیت‌ها، فرهنگ‌ها یا گروه‌های اجتماعی شود یا سیستم‌هایی ایجاد کند که به طور ناعادلانه با گروه‌های خاصی از بازیکنان رفتار می‌کنند.</p>
                    </div>
                    <li class="interactive-list-item" data-target="ethics-creativity">تاثیر بر خلاقیت انسان و یکنواختی</li>
                    <div id="ethics-creativity" class="interactive-list-item-content">
                        <p>در حالی که هوش مصنوعی می‌تواند ابزاری قدرتمند برای کمک به خلاقیت باشد، نگرانی‌هایی در مورد کاهش نقش طراحان انسانی، یکنواخت شدن تجربیات بازی به دلیل استفاده بیش از حد از الگوهای مشابه تولید شده توسط AI، و از دست رفتن "روح انسانی" در آثار وجود دارد.</p>
                    </div>
                    <li class="interactive-list-item" data-target="ethics-jobs">آینده شغلی بازیسازان و مهارت‌های جدید</li>
                    <div id="ethics-jobs" class="interactive-list-item-content">
                        <p>اتوماسیون برخی وظایف توسط هوش مصنوعی ممکن است بر آینده شغلی برخی نقش‌ها در صنعت بازی‌سازی تاثیر بگذارد. با این حال، انتظار می‌رود که نقش‌های جدیدی نیز در زمینه توسعه، مدیریت، و نظارت اخلاقی بر سیستم‌های هوش مصنوعی ایجاد شود و نیاز به مهارت‌های جدید افزایش یابد.</p>
                    </div>
                    <li class="interactive-list-item" data-target="ethics-privacy">حریم خصوصی بازیکن و استفاده از داده‌ها</li>
                    <div id="ethics-privacy" class="interactive-list-item-content">
                        <p>جمع‌آوری و تحلیل گسترده داده‌های رفتاری بازیکنان توسط سیستم‌های هوش مصنوعی، نگرانی‌هایی را در مورد حریم خصوصی، امنیت داده‌ها، و احتمال سوءاستفاده از این اطلاعات ایجاد می‌کند. شفافیت در مورد نحوه جمع‌آوری، ذخیره‌سازی و استفاده از این داده‌ها ضروری است.</p>
                    </div>
                     <li class="interactive-list-item" data-target="ethics-manipulation">دستکاری بازیکن و اعتیاد</li>
                    <div id="ethics-manipulation" class="interactive-list-item-content">
                        <p>هوش مصنوعی می‌تواند برای بهینه‌سازی حداکثری درگیری (engagement) بازیکنان استفاده شود. این امر اگر با دقت و مسئولیت‌پذیری انجام نشود، می‌تواند منجر به طراحی بازی‌هایی شود که به طور بالقوه اعتیادآور هستند یا بازیکنان را به سمت رفتارهای خاصی (مانند خریدهای درون‌برنامه‌ای بیش از حد) سوق می‌دهند.</p>
                    </div>
                </ul>
            </div>
        </section>

        <section id="future" class="py-8 md:py-10 card">
            <h2 class="section-title">آینده و روندهای پیش رو</h2>
            <div>
                <p class="mb-6">آینده هوش مصنوعی در بازی‌سازی بسیار هیجان‌انگیز و پر از پتانسیل‌های ناشناخته است. با پیشرفت‌های مداوم در یادگیری ماشین، پردازش زبان طبیعی، بینایی کامپیوتر و هوش مصنوعی مولد، می‌توان انتظار داشت که بازی‌ها به طور فزاینده‌ای هوشمند، شخصی‌سازی‌شده، فراگیر و حتی خود-تکامل‌یابنده شوند.</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="concept-box">
                        <h4 class="text-lg">هوش مصنوعی مولد (Generative AI) پیشرفته</h4>
                        <p class="text-sm">فراتر از تولید محتوای ساده، هوش مصنوعی مولد قادر به خلق داستان‌های پویا و چندشاخه، دیالوگ‌های طبیعی و متناسب با زمینه، شخصیت‌های با پس‌زمینه عمیق، و حتی دنیاهای بازی کامل با تاریخچه و اکوسیستم منحصربه‌فرد خواهد بود. ابزارهایی مانند مدل‌های زبانی بزرگ (LLMs) در حال ورود به این عرصه هستند.</p>
                    </div>
                    <div class="concept-box">
                        <h4 class="text-lg">NPCهای فوق هوشمند و "راویان هوش مصنوعی"</h4>
                        <p class="text-sm">شخصیت‌های غیرقابل بازی به طور فزاینده‌ای قادر به درک زبان طبیعی، نشان دادن طیف وسیعی از احساسات پیچیده، یادگیری از تعاملات گذشته و برقراری روابط اجتماعی عمیق و معنادار با بازیکنان خواهند بود. ممکن است شاهد ظهور "راویان هوش مصنوعی" یا "استادان سیاهچال هوشمند" باشیم که تجربه‌های داستانی کاملاً پویا و شخصی‌سازی‌شده را در لحظه خلق می‌کنند.</p>
                    </div>
                    <div class="concept-box">
                        <h4 class="text-lg">همکاری عمیق‌تر انسان و هوش مصنوعی (Human-AI Collaboration)</h4>
                        <p class="text-sm">هوش مصنوعی به عنوان یک همکار قدرتمند و خلاق برای طراحان، هنرمندان و برنامه‌نویسان عمل خواهد کرد. AI می‌تواند در ایده‌پردازی، نمونه‌سازی سریع، تولید محتوای پایه، و حتی اشکال‌زدایی کمک کند و به انسان‌ها اجازه دهد تا بر جنبه‌های پیچیده‌تر و خلاقانه‌تر تمرکز کنند.</p>
                    </div>
                    <div class="concept-box">
                        <h4 class="text-lg">تجربیات بازی فراگیرتر در VR/AR و متاورس</h4>
                        <p class="text-sm">هوش مصنوعی نقش حیاتی در ایجاد محیط‌ها و شخصیت‌های واقع‌گرایانه‌تر، واکنش‌گراتر و باورپذیرتر در بازی‌های واقعیت مجازی (VR)، واقعیت افزوده (AR) و پلتفرم‌های متاورس ایفا خواهد کرد. این امر به تعاملات طبیعی‌تر و حس حضور قوی‌تر منجر می‌شود.</p>
                    </div>
                </div>

                <div class="api-feature-box">
                    <h4>✨ ایده‌پرداز خلاق بازی</h4>
                    <p class="text-sm mb-3">یک تم یا ژانر برای بازی خود وارد کنید (مثلاً: "بازی بقا در یک جزیره متروکه با عناصر جادویی") و اجازه دهید هوش مصنوعی چند ایده نو برای مکانیک‌ها یا داستان آن پیشنهاد دهد.</p>
                    <input type="text" id="game-theme-input" class="api-input" placeholder="تم یا ژانر بازی را اینجا وارد کنید...">
                    <button id="generate-game-idea-button" class="api-button">✨ ایده پردازی کن</button>
                    <div id="game-idea-output" class="api-output">ایده‌های تولید شده در اینجا نمایش داده می‌شوند...</div>
                </div>

            </div>
        </section>
        
        <section id="conclusion" class="py-8 md:py-10 card">
            <h2 class="section-title">نتیجه‌گیری</h2>
            <div>
                <p class="mb-4 text-lg">هوش مصنوعی دیگر یک مفهوم آینده‌نگرانه در بازی‌سازی نیست، بلکه یک واقعیت حال حاضر و نیروی محرکه اصلی نوآوری در این صنعت است. از طریق یادگیری ماشین، سیستم‌های تطبیق‌پذیر و شبیه‌سازی‌های پیچیده اجتماعی، و اکنون با قدرت هوش مصنوعی مولد، هوش مصنوعی در حال بازتعریف مرزهای تجربه بازیکن، خلاقیت توسعه‌دهندگان و خود مفهوم "بازی" است.</p>
                <p class="mb-4">با وجود چالش‌های فنی و اخلاقی که باید با دقت مدیریت شوند، پتانسیل هوش مصنوعی برای ایجاد دنیاهای بازی زنده‌تر، داستان‌های پویاتر و تجربیات شخصی‌سازی‌شده‌تر بی‌نظیر است. آینده بازی‌سازی بدون شک با هوش مصنوعی گره خورده است و ما تنها در آغاز راه کشف قابلیت‌های شگفت‌انگیز آن هستیم.</p>
                <p>تمرکز بر یادگیری ماشین برای ایجاد رفتارهای هوشمند، توسعه سیستم‌های تطبیق‌پذیر برای شخصی‌سازی تجربه، و شبیه‌سازی تعاملات اجتماعی برای خلق دنیاهای باورپذیر، به همراه استفاده خلاقانه از هوش مصنوعی مولد، ارکان اساسی هستند که آینده بازی‌های کامپیوتری را شکل خواهند داد.</p>
            </div>
        </section>

        <section id="references" class="py-8 md:py-10 card">
            <h2 class="section-title">منابع (نمونه)</h2>
            <div>
                <p class="mb-4">در اینجا نمونه‌ای از منابعی که برای تهیه مطالب این حوزه می‌توان از آن‌ها استفاده کرد، آورده شده است. این لیست بر اساس منابع ارائه شده توسط شما و منابع عمومی معتبر در این حوزه انتخاب شده است.</p>
                <ul class="list-disc list-inside space-y-1 text-sm max-h-96 overflow-y-auto pr-4 columns-1 md:columns-2">
                    <li>Arulkumaran, K., Cully, A., & Togelius, J. (2019). *AlphaStar: An evolutionary computation perspective*.</li>
                    <li>DeepMind. (2019). *AlphaStar: Mastering the real-time strategy game StarCraft II*.</li>
                    <li>Google AI Blog (برای آخرین پیشرفت‌ها در مدل‌های هوش مصنوعی و کاربردها).</li>
                    <li>GDC Vault Talks (Various years on Nemesis System, NPC AI, Procedural Storytelling, Generative AI).</li>
                    <li>Millington, I., & Funge, J. (2009). *Artificial Intelligence for Games*.</li>
                    <li>Yannakakis, G. N., & Togelius, J. (2018). *Artificial Intelligence and Games*. Springer.</li>
                    <li>Russell, S. J., & Norvig, P. (2020). *Artificial Intelligence: A Modern Approach*. Pearson. (General AI concepts)</li>
                    <li>مقالات و وبلاگ‌های مرتبط از منابعی مانند: Game Developer (Gamasutra سابق), AI Game Dev, Inworld AI, Convai.</li>
                    <li>منابع فارسی مانند وبلاگ‌های آکادمی آمانج، کافه تدریس، فرادرس و ... در زمینه هوش مصنوعی و بازی‌سازی.</li>
                    <li>เอกสารات فنی موتورهای بازی‌سازی مانند Unreal Engine (Behavior Trees, EQS) و Unity (ML-Agents, Sentis).</li>
                </ul>
            </div>
        </section>
    </main>

    <footer class="p-6 mt-8">
        <p class="text-sm text-center">&copy; 1404 - تولید شده توسط محمد غلامپور. بهار 1404</p>
    </footer>

    <script>
        const roadmapDefinition = [
            { id: "cover-page", title: "صفحه معرفی ارائه", icon: "🌟" },
            { id: "intro", title: "مقدمه: نقش هوش مصنوعی", icon: "📖" },
            { id: "roadmap-section", title: "نقشه راه محتوایی", icon: "🗺️" },
            { id: "ml", title: "یادگیری ماشین: مغز متفکر", icon: "🧠" },
            { id: "adaptability", title: "تطبیق‌پذیری: رشد با بازیکن", icon: "⚙️" },
            { id: "social-sim", title: "شبیه‌سازی اجتماعی و تولید دیالوگ NPC", icon: "💬" },
            { id: "ethics", title: "ملاحظات اخلاقی و چالش‌ها", icon: "⚖️" },
            { id: "future", title: "آینده و ایده‌پردازی بازی", icon: "🚀" },
            { id: "conclusion", title: "نتیجه‌گیری", icon: "✅" },
            { id: "references", title: "منابع", icon: "📚" }
        ];

        function buildRoadmap() {
            const roadmapContainer = document.getElementById('interactive-roadmap');
            if (!roadmapContainer) return;
            roadmapContainer.innerHTML = ''; 
            roadmapDefinition.forEach((step, index) => {
                if (index === 0 && step.id === "cover-page") return; 

                const stepDiv = document.createElement('div');
                stepDiv.className = 'roadmap-step';
                
                const iconSpan = document.createElement('span');
                iconSpan.className = 'roadmap-step-icon';
                iconSpan.textContent = step.icon || '🔹';
                
                const titleSpan = document.createElement('span');
                titleSpan.textContent = (step.id === "roadmap-section") ? "مرور کلی نقشه راه" : step.title;
                
                stepDiv.appendChild(iconSpan);
                stepDiv.appendChild(titleSpan);
                
                stepDiv.dataset.targetId = step.id;
                stepDiv.onclick = () => scrollToSection(step.id);
                roadmapContainer.appendChild(stepDiv);

                let isLastDisplayedItem = false;
                // Check if this is the last item to be displayed in the visual roadmap
                if (index === roadmapDefinition.length - 1) { // Last item in the whole definition
                    isLastDisplayedItem = true;
                } else if (index === 0 && roadmapDefinition[0].id !== "cover-page" && index === roadmapDefinition.length - 1) {
                    // Only one item and it's not the cover page (edge case, unlikely with current setup)
                    isLastDisplayedItem = true;
                }


                if (!isLastDisplayedItem) {
                    let nextItemIsAlsoContent = false;
                    if (index + 1 < roadmapDefinition.length) {
                        if (roadmapDefinition[index+1].id !== "cover-page") { // Ensure next is not cover page if cover page is first
                            nextItemIsAlsoContent = true;
                        }
                    }
                    // If there's a next item AND it's a content item (not the cover page if cover page is first)
                    if (nextItemIsAlsoContent) {
                         const connectorDiv = document.createElement('div');
                        connectorDiv.className = 'roadmap-connector';
                        roadmapContainer.appendChild(connectorDiv);
                    }
                }
            });
        }

        function scrollToSection(sectionId) {
            const sectionElement = document.getElementById(sectionId);
            if (sectionElement) {
                const mobileMenu = document.getElementById('mobile-menu');
                if(!mobileMenu.classList.contains('hidden')){
                    toggleMobileMenu(); // Close mobile menu on link click
                }
                sectionElement.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        function openTab(event, tabName) {
            let i, tabcontent, tabbuttons;
            const tabContainer = event.currentTarget.closest('.mb-6'); 
            if (!tabContainer) return;

            tabcontent = tabContainer.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
                tabcontent[i].classList.remove("active");
            }
            tabbuttons = event.currentTarget.parentElement.getElementsByClassName("tab-button"); 
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].classList.remove("active"); 
            }
            const activeTabContent = tabContainer.querySelector("#" + tabName);
            if (activeTabContent) {
                 activeTabContent.style.display = "block";
                 activeTabContent.classList.add("active");
            }
            event.currentTarget.classList.add("active"); 
        }

        const loadingOverlay = document.getElementById('loading-overlay');

        function showLoading() {
            if (loadingOverlay) loadingOverlay.style.display = 'flex';
        }

        function hideLoading() {
            if (loadingOverlay) loadingOverlay.style.display = 'none';
        }

        async function callGenerativeAPI(promptText) { 
            showLoading();
            const apiKey = "AIzaSyCxLzBp6KlOnYeQ7DwjGQ7OguXbk2Wzq4c"; // <--- کلید API گوگل خود را اینجا وارد کنید
            
            if (apiKey === "") {
                hideLoading();
                return "خطا: کلید API تنظیم نشده است. لطفاً کلید API خود را در کد در بخش <script> وارد کنید (متغیر apiKey).";
            }

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{
                    parts: [{ text: promptText }]
                }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API Error:', errorData);
                    hideLoading();
                    return `خطا در ارتباط با API (${response.status}): ${errorData.error?.message || response.statusText}`;
                }

                const result = await response.json();
                hideLoading();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else if (result.candidates && result.candidates.length > 0 && result.candidates[0].finishReason) {
                     if (result.candidates[0].finishReason === "SAFETY") {
                        console.error('API Safety Error:', result.candidates[0].safetyRatings);
                        return "محتوای تولید شده توسط فیلترهای ایمنی مسدود شد. لطفاً درخواست خود را تغییر دهید یا تنظیمات ایمنی پروژه خود را در Google AI Studio بررسی کنید.";
                    } else if (result.candidates[0].finishReason === "RECITATION") {
                         return "محتوای تولید شده به دلیل محدودیت‌های مربوط به تکرار محتوا مسدود شد.";
                    } else {
                        return `پاسخ از API دریافت شد اما محتوای متنی ندارد. دلیل پایان: ${result.candidates[0].finishReason}`;
                    }
                }
                 else {
                    console.error('Unexpected API response structure:', result);
                    return "پاسخ غیرمنتظره از API دریافت شد.";
                }
            } catch (error) {
                console.error('Fetch error for API:', error);
                hideLoading();
                return "خطا در برقراری ارتباط با سرور API.";
            }
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const openIcon = document.getElementById('mobile-menu-open-icon');
            const closeIcon = document.getElementById('mobile-menu-close-icon');
            mobileMenu.classList.toggle('hidden');
            openIcon.classList.toggle('hidden');
            closeIcon.classList.toggle('hidden');
        }

        document.addEventListener('DOMContentLoaded', () => {
            buildRoadmap();
            
            const themeToggleButton = document.getElementById('theme-toggle-button');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');
            const htmlElement = document.documentElement;
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');

            mobileMenuButton.addEventListener('click', toggleMobileMenu);
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    if (!document.getElementById('mobile-menu').classList.contains('hidden')) {
                        toggleMobileMenu();
                    }
                });
            });

            function applyTheme(isDark) {
                if (isDark) {
                    htmlElement.classList.add('dark');
                    darkIcon.classList.remove('hidden');
                    lightIcon.classList.add('hidden');
                } else {
                    htmlElement.classList.remove('dark');
                    darkIcon.classList.add('hidden');
                    lightIcon.classList.remove('hidden');
                }
                // Update chart colors after theme change
                if (window.mlChart && typeof window.mlChart.update === 'function') {
                    Chart.defaults.color = isDark ? getComputedStyle(htmlElement).getPropertyValue('--chart-ticks-dark').trim() : getComputedStyle(htmlElement).getPropertyValue('--chart-ticks-light').trim();
                    Chart.defaults.borderColor = isDark ? getComputedStyle(htmlElement).getPropertyValue('--chart-grid-dark').trim() : getComputedStyle(htmlElement).getPropertyValue('--chart-grid-light').trim();
                    window.mlChart.options.scales.x.ticks.color = Chart.defaults.color;
                    window.mlChart.options.scales.y.ticks.color = Chart.defaults.color;
                    window.mlChart.options.scales.x.grid.color = Chart.defaults.borderColor;
                    window.mlChart.options.scales.y.grid.color = Chart.defaults.borderColor;
                    window.mlChart.options.plugins.tooltip.backgroundColor = isDark ? 'rgba(40,37,36,0.85)' : 'rgba(0,0,0,0.75)';
                    window.mlChart.options.plugins.tooltip.titleColor = isDark ? '#f5f5f4' : '#ffffff';
                    window.mlChart.options.plugins.tooltip.bodyColor = isDark ? '#e5e5e5' : '#ffffff';
                    window.mlChart.update('none'); // 'none' to prevent re-animation if not desired
                }
            }

            let isDarkMode = localStorage.getItem('theme') === 'dark';
            if (localStorage.getItem('theme') === null) {
                isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
            }
            applyTheme(isDarkMode); 

            themeToggleButton.addEventListener('click', () => {
                isDarkMode = !isDarkMode; 
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                applyTheme(isDarkMode);
            });

             const firstTabButtonInFirstGroup = document.querySelector('#ml .tab-button-container .tab-button'); 
             if(firstTabButtonInFirstGroup) { 
                openTab({ currentTarget: firstTabButtonInFirstGroup }, 'supervised');
             }

            const cards = document.querySelectorAll('.card');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target); 
                    }
                });
            }, { threshold: 0.05 }); 

            cards.forEach(card => {
                observer.observe(card);
            });

            const mlChartCanvas = document.getElementById('mlApplicationsChart');
            if (mlChartCanvas) {
                const ctx = mlChartCanvas.getContext('2d');
                if (window.mlChart instanceof Chart) {
                    window.mlChart.destroy();
                }
                
                const initialIsDark = htmlElement.classList.contains('dark');
                Chart.defaults.color = initialIsDark ? getComputedStyle(htmlElement).getPropertyValue('--chart-ticks-dark').trim() : getComputedStyle(htmlElement).getPropertyValue('--chart-ticks-light').trim();
                Chart.defaults.borderColor = initialIsDark ? getComputedStyle(htmlElement).getPropertyValue('--chart-grid-dark').trim() : getComputedStyle(htmlElement).getPropertyValue('--chart-grid-light').trim();

                window.mlChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['رفتار NPCها', 'تولید محتوای رویه‌ای (PCG)', 'تحلیل و مدل‌سازی بازیکن', 'متوازن‌سازی و تست بازی', 'تشخیص تقلب و ناهنجاری'],
                        datasets: [{
                            label: 'میزان تاثیرگذاری و کاربرد مفهومی',
                            data: [88, 80, 75, 70, 68],
                            backgroundColor: [
                                'rgba(13, 148, 136, 0.8)', 
                                'rgba(15, 118, 110, 0.8)', 
                                'rgba(19, 78, 74, 0.8)',   
                                'rgba(55, 157, 147, 0.8)',
                                'rgba(20, 184, 166, 0.8)'  
                            ],
                            borderColor: [
                                'rgba(13, 148, 136, 1)',
                                'rgba(15, 118, 110, 1)',
                                'rgba(19, 78, 74, 1)',
                                'rgba(55, 157, 147, 1)',
                                'rgba(20, 184, 166, 1)'
                            ],
                            borderWidth: 1.5,
                            borderRadius: 5
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: { 
                                    display: true, 
                                    color: Chart.defaults.borderColor
                                 },
                                ticks: {
                                    callback: function(value) { return value + "%" },
                                    font: { family: "'Vazirmatn', sans-serif", size: 12, weight: '300' },
                                    color: Chart.defaults.color
                                }
                            },
                            y: {
                                 grid: { 
                                    color: Chart.defaults.borderColor
                                 },
                                 ticks: {
                                    font: { family: "'Vazirmatn', sans-serif", size: 11, weight: '400' },
                                    color: Chart.defaults.color
                                }
                            }
                        },
                        plugins: {
                            legend: { 
                                display: false,
                            },
                            tooltip: {
                                backgroundColor: initialIsDark ? 'rgba(40,37,36,0.85)' : 'rgba(0,0,0,0.75)',
                                titleFont: { family: "'Vazirmatn', sans-serif", size: 14, weight: '500' },
                                bodyFont: { family: "'Vazirmatn', sans-serif", size: 12 },
                                titleColor: initialIsDark ? '#f5f5f4' : '#ffffff',
                                bodyColor: initialIsDark ? '#e5e5e5' : '#ffffff',
                                padding: 10,
                                cornerRadius: 5,
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': ' + context.raw + '%';
                                    }
                                }
                            }
                        },
                        animation: {
                            duration: 1000,
                            easing: 'easeInOutQuart'
                        }
                    }
                });
            }

            const interactiveListItems = document.querySelectorAll('.interactive-list-item');
            interactiveListItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetId = item.getAttribute('data-target');
                    const targetContent = document.getElementById(targetId);
                    if (targetContent) {
                        const isVisible = targetContent.style.display === 'block';
                        item.closest('ul').querySelectorAll('.interactive-list-item-content').forEach(content => {
                            if (content !== targetContent) content.style.display = 'none';
                        });
                        targetContent.style.display = isVisible ? 'none' : 'block';
                    }
                });
            });
            
            const navLinks = document.querySelectorAll('#main-nav a.nav-link');
            const sections = document.querySelectorAll('main section'); 
            const roadmapSteps = document.querySelectorAll('.roadmap-step'); 

            function updateActiveStates() {
                let currentSectionId = '';
                let minDistance = Infinity;
                const headerOffset = 80; 

                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const sectionId = section.getAttribute('id');
                    
                    if (rect.top <= headerOffset && rect.bottom >= headerOffset) { 
                        const distanceToViewportTop = Math.abs(rect.top - headerOffset);
                        if (distanceToViewportTop < minDistance) {
                            minDistance = distanceToViewportTop;
                            currentSectionId = sectionId;
                        }
                    } else if (rect.top > headerOffset && rect.top < window.innerHeight) { 
                         if (rect.top < minDistance && currentSectionId === '') { 
                            minDistance = rect.top;
                            currentSectionId = sectionId;
                        }
                    }
                });
                
                if (!currentSectionId && sections.length > 0) {
                    if (window.scrollY <= sections[0].offsetTop / 2) { 
                        currentSectionId = sections[0].getAttribute('id');
                    } else if (window.scrollY + window.innerHeight >= document.body.scrollHeight - 50) { 
                        currentSectionId = sections[sections.length - 1].getAttribute('id');
                    } else { 
                        for(let section of sections) {
                            if(section.getBoundingClientRect().top < window.innerHeight) {
                                currentSectionId = section.getAttribute('id');
                                break;
                            }
                        }
                        if(!currentSectionId) currentSectionId = sections[0].getAttribute('id'); 
                    }
                }

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === currentSectionId) {
                        link.classList.add('active');
                    }
                });
                
                roadmapSteps.forEach(step => {
                    step.classList.remove('active');
                    if (step.dataset.targetId === currentSectionId && currentSectionId !== 'cover-page') {
                        step.classList.add('active');
                    } 
                });
            }
            
            window.addEventListener('scroll', updateActiveStates);
            updateActiveStates(); 
            setTimeout(updateActiveStates, 200);

            const npcScenarioInput = document.getElementById('npc-scenario-input');
            const generateNpcDialogueButton = document.getElementById('generate-npc-dialogue-button');
            const npcDialogueOutput = document.getElementById('npc-dialogue-output');

            if (generateNpcDialogueButton) {
                generateNpcDialogueButton.addEventListener('click', async () => {
                    const scenario = npcScenarioInput.value.trim();
                    if (!scenario) {
                        npcDialogueOutput.textContent = "لطفاً یک سناریو برای NPC وارد کنید.";
                        return;
                    }
                    npcDialogueOutput.textContent = "در حال تولید دیالوگ...";
                    const prompt = `یک دیالوگ کوتاه و جذاب برای یک شخصیت غیرقابل بازی (NPC) در یک بازی کامپیوتری بنویس. سناریو این است: "${scenario}". دیالوگ باید به زبان فارسی روان و طبیعی باشد.`;
                    const dialogue = await callGenerativeAPI(prompt); 
                    npcDialogueOutput.textContent = dialogue;
                });
            }

            const gameThemeInput = document.getElementById('game-theme-input');
            const generateGameIdeaButton = document.getElementById('generate-game-idea-button');
            const gameIdeaOutput = document.getElementById('game-idea-output');

            if (generateGameIdeaButton) {
                generateGameIdeaButton.addEventListener('click', async () => {
                    const theme = gameThemeInput.value.trim();
                    if (!theme) {
                        gameIdeaOutput.textContent = "لطفاً یک تم یا ژانر برای بازی وارد کنید.";
                        return;
                    }
                    gameIdeaOutput.textContent = "در حال ایده پردازی...";
                    const prompt = `چند ایده خلاقانه (2 تا 3 ایده) برای مکانیک‌های گیم‌پلی یا نقاط داستانی یک بازی کامپیوتری با موضوع "${theme}" ارائه بده. ایده‌ها باید کوتاه، جذاب و به زبان فارسی باشند. هر ایده را با یک خط تیره (-) شروع کن.`;
                    const ideas = await callGenerativeAPI(prompt); 
                    gameIdeaOutput.textContent = ideas;
                });
            }
        });
    </script>
</body>
</html>
